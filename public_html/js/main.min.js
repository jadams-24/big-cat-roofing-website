document.addEventListener('DOMContentLoaded',function(){const a=document.querySelector('.mobile-menu-toggle'),b=document.querySelector('.nav-menu'),c=document.body;let d=!1;if(a&&b){function e(){d=!d,a.classList.toggle('active',d),b.classList.toggle('active',d),c.classList.toggle('menu-open',d),a.setAttribute('aria-expanded',d),c.style.overflow=d?'hidden':''}function f(){d&&(d=!1,a.classList.remove('active'),b.classList.remove('active'),c.classList.remove('menu-open'),a.setAttribute('aria-expanded','false'),c.style.overflow='')}a.addEventListener('click',function(g){g.preventDefault(),g.stopPropagation(),e()}),a.addEventListener('touchend',function(g){g.preventDefault()}),document.addEventListener('click',function(g){d&&!a.contains(g.target)&&!b.contains(g.target)&&f()});const h=b.querySelectorAll('a:not(.has-dropdown > a)');h.forEach(i=>{i.addEventListener('click',function(){f()})}),document.addEventListener('keydown',function(i){i.key==='Escape'&&d&&f()})}const j=document.querySelectorAll('.has-dropdown');j.forEach(k=>{const l=k.querySelector('a'),m=k.querySelector('.dropdown-menu');l&&m&&l.addEventListener('click',function(n){window.innerWidth<=768&&(n.preventDefault(),n.stopPropagation(),j.forEach(o=>{o!==k&&o.classList.remove('active')}),k.classList.toggle('active'))})});const p=document.querySelectorAll('a[href^="#"]');p.forEach(q=>{q.addEventListener('click',function(r){r.preventDefault();const s=this.getAttribute('href');if(s==='#')return;const t=document.querySelector(s);if(t){const u=document.querySelector('.main-header').offsetHeight,v=t.offsetTop-u;window.scrollTo({top:v,behavior:'smooth'})}})});const w=document.querySelector('.main-header');let x=0;window.addEventListener('scroll',function(){const y=window.pageYOffset||document.documentElement.scrollTop;y>x&&y>100?w.classList.add('header-hidden'):w.classList.remove('header-hidden'),y>50?w.classList.add('header-scrolled'):w.classList.remove('header-scrolled'),x=y<=0?0:y});const z=document.querySelectorAll('a[href^="tel:"]');z.forEach(A=>{A.addEventListener('click',function(){typeof gtag!=='undefined'&&gtag('event','click',{event_category:'Contact',event_label:'Phone Call'})})});const B=document.querySelectorAll('img[data-src]');if('IntersectionObserver'in window){const C=new IntersectionObserver((D,E)=>{D.forEach(F=>{if(F.isIntersecting){const G=F.target;G.src=G.dataset.src,G.removeAttribute('data-src'),C.unobserve(G)}})});B.forEach(H=>C.observe(H))}else B.forEach(I=>{I.src=I.dataset.src,I.removeAttribute('data-src')});const J=document.querySelectorAll('.animate-on-scroll');if(J.length>0&&'IntersectionObserver'in window){const K=new IntersectionObserver(L=>{L.forEach(M=>{M.isIntersecting&&(M.target.classList.add('animated'),K.unobserve(M.target))})},{threshold:0.1});J.forEach(N=>K.observe(N))}const O=document.querySelectorAll('form');O.forEach(P=>{P.addEventListener('submit',function(Q){const R=P.querySelectorAll('[required]');let S=!0;R.forEach(T=>{if(!T.value.trim()){S=!1,T.classList.add('error')}else T.classList.remove('error');if(T.type==='email'&&T.value){const U=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;U.test(T.value)||T.classList.add('error'),S=!1}if(T.type==='tel'&&T.value){const V=/^[\d\s\-\(\)]+$/;(V.test(T.value)&&T.value.replace(/\D/g,'').length>=10)||(S=!1,T.classList.add('error'))}}),S||Q.preventDefault()});const W=P.querySelectorAll('input, textarea, select');W.forEach(X=>{X.addEventListener('input',function(){this.classList.remove('error')})})});if('serviceWorker'in navigator){window.addEventListener('load',function(){navigator.serviceWorker.register('/sw.js').then(function(Y){console.log('ServiceWorker registration successful')},function(Z){console.log('ServiceWorker registration failed: ',Z)})})}});function debounce(a,b){let c;return function d(...e){const f=()=>{clearTimeout(c),a(...e)};clearTimeout(c),c=setTimeout(f,b)}}function throttle(a,b){let c;return function(){const d=arguments,e=this;c||(a.apply(e,d),c=!0,setTimeout(()=>c=!1,b))}}